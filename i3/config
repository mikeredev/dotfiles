# i3 config file (v4)
# i3blocks signals: 1 volume, 2 ethernet, 3 wifi

# variables
    # display
        set $monitor        HDMI-0
        set $resolution     1920x1080
    # environment
        set $mod            Mod4
        set $background     --randomize ~/Pictures/wallpapers/*
        set $lockscreen     ~/Pictures/wallpapers/lockscreen.png
    # window appearance
        set $font           JetBrains Mono Bold 9
        set $title          <span font='JetBrains Mono Light 9'>[%title]</span>
        set $border_px      1
    # window behaviour
        set $float_class    Pavucontrol|Gnome-tweaks|Lxappearance

# desktop
    # rofi
        bindsym $mod+d exec --no-startup-id rofi -show drun
        bindsym $mod+Tab exec --no-startup-id rofi -show combi -modes combi -combi-modes window#ssh
    # volume control
        bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && exec pkill -RTMIN+1 i3blocks
        bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && exec pkill -RTMIN+1 i3blocks
        bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && exec pkill -RTMIN+1 i3blocks
        bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && exec pkill -RTMIN+1 i3blocks
    # screenshots
        bindsym --release Print exec --no-startup-id sh -c '~/.config/scripts/tools/screenshot.sh -option "copy area"'
        bindsym $mod+Print exec --no-startup-id sh -c '~/.config/scripts/tools/screenshot.sh'
    # apps
        bindsym $mod+Return exec i3-sensible-terminal
        bindsym $mod+mod2+KP_1 exec --no-startup-id brave; workspace $ws1; focus
        bindsym $mod+mod2+KP_2 exec --no-startup-id vscodium; workspace $ws2; focus
        bindsym $mod+mod2+KP_3 exec --no-startup-id thunar
    # custom / scripts
        bindsym $mod+space exec --no-startup-id dunstctl history-pop
        bindsym $mod+mod2+KP_0 mode "$mode_menu"
        bindsym $mod+l mode "$mode_session"
        #bindsym $mod+mod2+KP_8 exec --no-startup-id i3-msg reload
        #bindsym $mod+mod2+KP_9 exec --no-startup-id i3-msg restart
        #bindsym $mod+l exec --no-startup-id sh -c "~/.config/scripts/tools/powermenu.sh"

# containers
    # appearance
        font pango:$font
        for_window [class=".*"] title_format $title
        for_window [class=".*"] border pixel $border_px
        gaps inner 2
        gaps outer 1
    # behaviour
        smart_borders on
        floating_modifier $mod
        focus_follows_mouse off
        tiling_drag modifier titlebar
        for_window [class=$float_class] floating enable, border pixel 0
        for_window [window_type="dialog"] move absolute position center, border pixel 0
    # keybindings
        # management
            bindsym $mod+Shift+q kill
            bindsym $mod+f fullscreen toggle
            bindsym $mod+h split h
            bindsym $mod+v split v
            bindsym --whole-window $mod+button3 floating toggle
        # resizing
            bindsym $mod+Ctrl+Up resize grow height 1 px or 1 ppt
            bindsym $mod+Ctrl+Right resize grow width 1 px or 1 ppt
            bindsym $mod+Ctrl+Down resize shrink height 1 px or 1 ppt
            bindsym $mod+Ctrl+Left resize shrink width 1 px or 1 ppt
        # shift window focus
            bindsym $mod+Left focus left
            bindsym $mod+Down focus down
            bindsym $mod+Up focus up
            bindsym $mod+Right focus right
        # shift window position
            bindsym $mod+Shift+Left move left
            bindsym $mod+Shift+Down move down
            bindsym $mod+Shift+Up move up
            bindsym $mod+Shift+Right move right

# workspaces
    # labels
        set $ws0 "0:<span font='Font Awesome 6 Free Regular 11'></span>"
        set $ws1 "1:<span font='Font Awesome 6 Free Regular 11'></span>"
        set $ws2 "2:<span font='Font Awesome 6 Free Regular 11'></span>"
        set $ws3 "3:<span font='Font Awesome 6 Free Regular 11'></span>"

    # keybindings
        # switch to workspace
            bindsym $mod+comma workspace prev
            bindsym $mod+period workspace next
            bindsym $mod+0 workspace number $ws0
            bindsym $mod+1 workspace number $ws1
            bindsym $mod+2 workspace number $ws2
            bindsym $mod+3 workspace number $ws3
        # move focused container to workspace
            bindsym $mod+Shift+0 move container to workspace number $ws0
            bindsym $mod+Shift+1 move container to workspace number $ws1
            bindsym $mod+Shift+2 move container to workspace number $ws2
            bindsym $mod+Shift+3 move container to workspace number $ws3

# display configuration
    exec_always xrandr --output $monitor --mode $resolution

# application rules
    for_window [class=KeePass2|Gimp*] move to workspace $ws0
    for_window [class="Brave-browser"] move to workspace $ws1
    for_window [class="VSCodium"] move to workspace $ws2
    for_window [class="steam"] move to workspace $ws3

# autostart
    exec --no-startup-id dunst
    exec --no-startup-id picom -b
    exec_always --no-startup-id feh --bg-fill $background
    exec --no-startup-id setxkbmap ie
    exec --no-startup-id redshift
    exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 40%

# appearance
    # colors
        set $black              #282c34
        set $white              #ffffff
        set $lightgrey          #a9a9a9
        set $darkgrey           #4c566a
        set $green              #8ae234
        set $darkgreen          #149414
        set $orange             #ffa500
    # windows
        # class                 border      backgr.     text        indicator   child_border
        client.focused          $darkgrey   $black      $lightgrey  $orange     $green
        client.focused_inactive $darkgrey   $black      $darkgrey
        client.unfocused        $black      $black      $darkgrey
        client.urgent           $darkgreen  $green      $darkgreen
        client.placeholder      $black      $black      $darkgrey
        client.background       $black

# statusbar
    bar {
        status_command          i3blocks -c ~/.config/i3blocks/i3blocks.conf
        position                top
        height                  30
        tray_padding            4
        workspace_min_width     75
        separator_symbol        "/"
        workspace_buttons       yes
        strip_workspace_numbers yes
        colors {
            background          $black
            statusline          $lightgrey
            separator           $darkgrey
            # class             border      backgr.     text
            focused_workspace   $white      $darkgrey   $white
            inactive_workspace  $darkgrey   $black      $lightgrey
            urgent_workspace    $lightgrey  $green      $darkgreen
            binding_mode        $black      $black      $orange
        }
    }

# binding modes
    # session mode - lock, reboot, etc. also reload or restart i3.
        set $mode_session lock(Return), (s)uspend, (r)eload i3, restart i3(c), logoff($mod+Ctrl+x), reboot($mod+Ctrl+r), poweroff($mod+Ctrl+s)
        mode "$mode_session" {
            bindsym Return      exec --no-startup-id i3lock -efti $lockscreen, mode "default"
            bindsym s           exec --no-startup-id i3lock -efti $lockscreen && exec systemctl suspend, mode "default"
            bindsym r           exec i3-msg reload
            bindsym c           exec i3-msg restart
            bindsym $mod+Ctrl+x exec i3-msg exit
            bindsym $mod+Ctrl+r exec systemctl reboot
            bindsym $mod+Ctrl+s exec systemctl poweroff
            bindsym Escape      mode "default"
        }

    # tools menu mode
        set $mode_menu [NUMPAD] containers(1), wifi manager(2), chatbot(3)
        mode "$mode_menu" {
            bindsym mod2+KP_1   mode "$mode_containers"
            bindsym mod2+KP_2   exec --no-startup-id sh -c '~/.config/scripts/tools/connect-wifi.sh', mode "default"
            bindsym mod2+KP_3   exec --no-startup-id sh -c 'python ~/.config/scripts/openai/gpt-chatbot-rofi.py', mode "default"
            bindsym Return      mode "$mode_menu"
            bindsym Escape      mode "default"
        }

    # container display mode - enter resize or gaps manual modes
        set $mode_containers [containers] layout(1), resize(2), gaps(3)
        mode "$mode_containers" {
            bindsym mod2+KP_1   mode "$mode_layout"
            bindsym mod2+KP_2   mode "$mode_resize"
            bindsym mod2+KP_3   mode "$mode_gaps"
            bindsym Return      mode "$mode_containers"
            bindsym Escape      mode "default"
        }

        # layout mode - switch between stacked/tabbed containers
            set $mode_layout [layout] cycle(0), split(1), stacked(2), tabbed(3)
            mode "$mode_layout" {
                bindsym mod2+KP_0   layout toggle
                bindsym mod2+KP_1   layout toggle split
                bindsym mod2+KP_2   layout stacking
                bindsym mod2+KP_3   layout tabbed
                bindsym Return      mode "default"
                bindsym Escape      mode "$mode_containers"
            }

        # resize mode
            set $mode_resize [resize]    
            mode "$mode_resize" {
                bindsym Up      resize grow height 10 px or 10 ppt
                bindsym Right   resize grow width 10 px or 10 ppt
                bindsym Down    resize shrink height 10 px or 10 ppt
                bindsym Left    resize shrink width 10 px or 10 ppt
                bindsym Return  mode "default"
                bindsym Escape  mode "$mode_containers"
            }

        # gaps mode
            set $mode_gaps [gaps] (o)uter, (i)nner, (h)orizontal, (v)ertical, (t)op, (r)ight, (b)ottom, (l)eft
            set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_horiz Horizontal Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_verti Vertical Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_top Top Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_right Right Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_bottom Bottom Gaps: +|-|0 (local), Shift + +|-|0 (global)
            set $mode_gaps_left Left Gaps: +|-|0 (local), Shift + +|-|0 (global)

            mode "$mode_gaps" {
                bindsym o      mode "$mode_gaps_outer"
                bindsym i      mode "$mode_gaps_inner"
                bindsym h      mode "$mode_gaps_horiz"
                bindsym v      mode "$mode_gaps_verti"
                bindsym t      mode "$mode_gaps_top"
                bindsym r      mode "$mode_gaps_right"
                bindsym b      mode "$mode_gaps_bottom"
                bindsym l      mode "$mode_gaps_left"
                bindsym Return mode "default"
                bindsym Escape mode "$mode_containers"
            }
            mode "$mode_gaps_outer" {
                bindsym plus  gaps outer current plus 5
                bindsym minus gaps outer current minus 5
                bindsym 0     gaps outer current set 0

                bindsym Shift+plus  gaps outer all plus 5
                bindsym Shift+minus gaps outer all minus 5
                bindsym Shift+0     gaps outer all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_inner" {
                bindsym plus  gaps inner current plus 5
                bindsym minus gaps inner current minus 5
                bindsym 0     gaps inner current set 0

                bindsym Shift+plus  gaps inner all plus 5
                bindsym Shift+minus gaps inner all minus 5
                bindsym Shift+0     gaps inner all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_horiz" {
                bindsym plus  gaps horizontal current plus 5
                bindsym minus gaps horizontal current minus 5
                bindsym 0     gaps horizontal current set 0

                bindsym Shift+plus  gaps horizontal all plus 5
                bindsym Shift+minus gaps horizontal all minus 5
                bindsym Shift+0     gaps horizontal all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_verti" {
                bindsym plus  gaps vertical current plus 5
                bindsym minus gaps vertical current minus 5
                bindsym 0     gaps vertical current set 0

                bindsym Shift+plus  gaps vertical all plus 5
                bindsym Shift+minus gaps vertical all minus 5
                bindsym Shift+0     gaps vertical all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_top" {
                bindsym plus  gaps top current plus 5
                bindsym minus gaps top current minus 5
                bindsym 0     gaps top current set 0

                bindsym Shift+plus  gaps top all plus 5
                bindsym Shift+minus gaps top all minus 5
                bindsym Shift+0     gaps top all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_right" {
                bindsym plus  gaps right current plus 5
                bindsym minus gaps right current minus 5
                bindsym 0     gaps right current set 0

                bindsym Shift+plus  gaps right all plus 5
                bindsym Shift+minus gaps right all minus 5
                bindsym Shift+0     gaps right all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_bottom" {
                bindsym plus  gaps bottom current plus 5
                bindsym minus gaps bottom current minus 5
                bindsym 0     gaps bottom current set 0

                bindsym Shift+plus  gaps bottom all plus 5
                bindsym Shift+minus gaps bottom all minus 5
                bindsym Shift+0     gaps bottom all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }
            mode "$mode_gaps_left" {
                bindsym plus  gaps left current plus 5
                bindsym minus gaps left current minus 5
                bindsym 0     gaps left current set 0

                bindsym Shift+plus  gaps left all plus 5
                bindsym Shift+minus gaps left all minus 5
                bindsym Shift+0     gaps left all set 0

                bindsym Return mode "$mode_gaps"
                bindsym Escape mode "default"
            }